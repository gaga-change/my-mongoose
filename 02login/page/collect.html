<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <title>个人收藏</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <script src="/static/lib/jquery.js"></script>
    <script src="/static/lib/bootstrap.min.js"></script>
</head>
<body>
<div class="container">
    <!-- 导航栏 -->
    <div class="row clearfix">
        <div class="col-md-12 column">
            <nav class="navbar navbar-default" role="navigation">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse"
                            data-target="#bs-example-navbar-collapse-1"><span
                       class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span
                       class="icon-bar"></span><span class="icon-bar"></span></button>
                    <a class="navbar-brand" href="JavaScript:void(0)">目录列表</a>
                </div>

                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav" id="menuList">
                    </ul>
                    <form class="navbar-form navbar-left" role="search">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="添加目录" id="addGradeInput"/>
                        </div>
                        <button type="button" class="btn btn-default" id="addGradeBtn">提交</button>
                    </form>
                </div>

            </nav>
        </div>
    </div>
    <div class="row clearfix">
        <div class="col-md-8 column">
            <div class="list-group">
                <a href="#" class="list-group-item active">Home</a>
                <div class="list-group-item">
                    List header
                </div>
                <div class="list-group-item">
                    <h4 class="list-group-item-heading">
                        List group item heading
                    </h4>
                    <p class="list-group-item-text">
                        ...
                    </p>
                </div>
                <div class="list-group-item">
                    <span class="badge">14</span> Help
                </div>
                <a class="list-group-item active"> <span class="badge">14</span> Help</a>
            </div>
        </div>
        <div class="col-md-4 column">
            <div class="row clearfix">
                <div class="col-md-12 column">
                    <h3>目录操作</h3>
                    <form role="form">
                        <div class="form-group">
                            <label for="inputNewGradeName">新目录名</label>
                            <input type="text" class="form-control" id="newGradeInput"/>
                        </div>
                        <button type="button" id="modifyGradeNameBtn" class="btn btn-default">修改目录名</button>
                        <button type="button" id="deleteGradeNameBtn" class="btn btn-default">删除该目录</button>
                    </form>
                </div>
            </div>
            <div class="row clearfix">
                <div class="col-md-12 column">
                    <h3>添加收藏</h3>
                    <form role="form">
                        <div class="form-group">
                            <label for="title">标题</label>
                            <input type="text" class="form-control" id="title"/>
                        </div>
                        <div class="form-group">
                            <label for="detail">描述</label>
                            <input type="text" class="form-control" id="detail"/>
                        </div>
                        <div class="form-group">
                            <label for="url">链接地址</label>
                            <input type="text" class="form-control" id="url"/>
                        </div>
                        <button type="button" onclick="addUrl()" class="btn btn-default">提交</button>
                    </form>
                </div>
            </div>
            <div class="row clearfix">
                <div class="col-md-12 column">
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/static/js/common.js"></script>
<script src="/static/js/api.js"></script>
<script src="/static/js/collect/main.js"></script>
<script>

/*  /!**
   * 点击菜单
   *!/
  function menuListClick (e) {
    $(e.currentTarget).find('li').removeClass('active')
    $(e.target).parent().addClass('active')
    var index = $(e.target).attr('data-index')
    GradeCheck = index
  }

  /!**
   * 获取该用户的目录列表
   *!/
  function getGrade () {
    $.get('/api/collect/grade').then(function (res) {
      Grade = res.grade
      $('#menuList').html('')
      Grade.forEach(function (item, index) {
        var gradeEle = $(`<li><a href="JavaScript:void(0)" data-index="${index}">${item}</a></li>`)
        if (index === Number(GradeCheck)) gradeEle.addClass('active')
        $('#menuList').append(gradeEle)
      })
    })
  }

  /!**
   * 修改目录名
   *!/
  window.modifyGradeName = function () {
    var newGradeName = $('#inputNewGradeName').val()
    if (!newGradeName) return window.myAlert('请输入新目录名！')
    $.ajax({
      type: 'put',
      url: '/api/collect/grade',
      data: {oldGradeName: Grade[GradeCheck], newGradeName}
    }).then(res => {
      if (res.success) {
        window.myAlert('修改成功')
        getGrade()
        $('#inputNewGradeName').val('')
      } else {
        window.myAlert(res.message)
      }
    })
  }

  /!**
   * 删除目录
   *!/
  window.deleteGradeName = function () {
    $.ajax({type: 'delete', url: '/api/collect/grade', data: {gradeNames: JSON.stringify([Grade[GradeCheck]])}}).then(res => {
      if (res.success) {
        window.myAlert('删除成功')
        GradeCheck = 0
        getGrade()
      } else {
        window.myAlert(res.message)
      }
    })
  }
  /!**
   * 添加新目录
   *!/
  window.addGrade = function () {
    var gradeName = $('#inputGrade').val()
    if (!gradeName) return window.myAlert('请输入目录名！')
    $.post('/api/collect/grade', {gradeName: gradeName}).then(res => {
      if (res.success) {
        window.myAlert('添加成功呢！')
        $('#inputGrade').val('')
        getGrade()
      } else {
        window.myAlert(res.message)
      }
    })
  }

  window.addUrl = function () {
    var title = $('#title').val()
    var detail = $('#detail').val()
    var url = $('#url').val()
    $.post('/api/address/add', {title, detail, url}).then(function (res) {
      if (res.success) {
        console.log('添加成功')
      } else {
        console.log(res.message)
      }
    })
  }*/
</script>
</body>
</html>